<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link rel="stylesheet" href="style.css">
</head>

<body class="light-mode">
    <div class="container">
        <div class="header-controls">
            <h1>To Do List</h1>
            <div class="header-buttons">
                <button id="profileBtn" class="profile-btn">프로필</button>
                <button id="logoutBtn" class="logout-btn">로그아웃</button>
                <!-- 라이트/다크 토글 버튼 -->
                <button id="themeToggleBtn" class="theme-toggle">다크 모드</button>
            </div>
        </div>

        <!-- 검색 + 필터 -->
        <div class="controls-bar">
            <input type="text" id="taskSearchInput" placeholder="할 일 검색...">
            <div class="filter-buttons">
                <button class="filter-btn" data-filter="all">전체</button>
                <button class="filter-btn" data-filter="work">업무</button>
                <button class="filter-btn" data-filter="personal">개인</button>
                <button class="filter-btn" data-filter="exercise">운동</button>
                <button class="filter-btn" data-filter="rest">휴식</button>
            </div>
            <div class="date-view-controls">
                <button class="date-view-btn" data-view-type="monthly">Monthly</button>
                <button class="date-view-btn" data-view-type="weekly">Weekly</button>
                <button class="date-view-btn" data-view-type="daily">Daily</button>
            </div>
        </div>

        <!-- 할 일 입력 -->
        <div class="input-area">
            <input type="text" id="taskInput" placeholder="할 일을 입력하세요.">
            <button id="addTaskBtn">추가</button>
        </div>

        <!-- 카테고리 ~ 날짜 + 시간 (작게) -->
        <div class="task-details-area">
            <select id="categorySelect">
                <option value="all">카테고리</option>
                <option value="work">업무</option>
                <option value="personal">개인</option>
                <option value="exercise">운동</option>
                <option value="rest">휴식</option>
            </select>

            <select id="repetitionSelect">
                <option value="none">반복 없음</option>
                <option value="daily">매일</option>
                <option value="weekdays">평일</option>
                <option value="weekly">매주</option>
                <option value="monthly">매달</option>
            </select>

            <select id="prioritySelect">
                <option value="none">우선순위</option>
                <option value="high">상</option>
                <option value="medium">중</option>
                <option value="low">하</option>
            </select>

            <select id="emojiSelect">
                <option value="">이모티콘</option>
                <option value="😀">😀</option>
                <option value="🙂">🙂</option>
                <option value="😐">😐</option>
                <option value="😢">😢</option>
                <option value="😡">😡</option>
            </select>

            <input type="date" id="dueDateInput">
            <div class="time-input-group">
                <select id="dueAmPmInput">
                    <option value="am">오전</option>
                    <option value="pm">오후</option>
                </select>
                <input type="text" id="dueTimeInput" placeholder="시간 (예: 10:30)">
            </div>
        </div>

        <!-- 캘린더 + 선택 날짜 일정 -->
        <div class="calendar-and-schedule-wrapper">
            <div class="calendar-section">
                <div class="calendar-header">
                    <button id="prevMonthBtn" class="nav-btn">&lt;</button>
                    <h2 id="currentMonthYear"></h2>
                    <button id="nextMonthBtn" class="nav-btn">&gt;</button>
                </div>

                <div class="calendar-grid">
                    <!-- 요일 헤더 -->
                    <div class="day-header">일</div>
                    <div class="day-header">월</div>
                    <div class="day-header">화</div>
                    <div class="day-header">수</div>
                    <div class="day-header">목</div>
                    <div class="day-header">금</div>
                    <div class="day-header">토</div>
                    <!-- 날짜 칸은 JS에서 채움 -->
                </div>
            </div>

            <div id="dailyScheduleDisplay" class="daily-schedule-display">
                <h3>선택한 날짜의 일정</h3>
                <ul id="dailyTaskList"></ul>
            </div>
        </div>

        <!-- 전체 일정 리스트 -->
        <ul id="taskList"></ul>
    </div>

    <!-- 프로필 모달 -->
    <div id="profileModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>프로필 설정</h2>

            <div class="profile-info">
                <h3>기본 정보</h3>
                <p><strong>이메일:</strong> <span id="userEmail">-</span></p>
                <p><strong>닉네임:</strong> <span id="userNickname">-</span></p>
                <p><strong>이름:</strong> <span id="userName">-</span></p>
                <p><strong>가입일:</strong> <span id="userCreatedAt">-</span></p>
            </div>

            <div class="profile-photo">
                <h3>프로필 사진</h3>
                <div class="photo-preview">
                    <img id="profilePhotoPreview" src="/uploads/profiles/default-avatar.png" alt="프로필 사진"
                        onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5SnPC90ZXh0Pjwvc3ZnPg=='">
                </div>
                <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;">
                <button id="selectPhotoBtn" class="btn-secondary">사진 선택</button>
                <button id="uploadPhotoBtn" class="btn-primary" style="display: none;">업로드</button>
                <p id="photoUploadMsg" class="message"></p>
            </div>

            <div class="profile-edit">
                <h3>정보 수정</h3>
                <label>
                    <span>이름:</span>
                    <input type="text" id="editName" placeholder="새 이름">
                </label>
                <label>
                    <span>닉네임:</span>
                    <input type="text" id="editNickname" placeholder="새 닉네임">
                </label>
                <label>
                    <span>주소:</span>
                    <input type="text" id="editAddress" placeholder="새 주소">
                </label>
                <label>
                    <span>전화번호:</span>
                    <input type="text" id="editPhone" placeholder="새 전화번호">
                </label>
                <button id="updateProfileBtn" class="btn-primary">정보 수정</button>
                <p id="profileUpdateMsg" class="message"></p>
            </div>

            <div class="profile-password">
                <h3>비밀번호 변경</h3>
                <label>
                    <span>현재 비밀번호:</span>
                    <input type="password" id="currentPassword" placeholder="현재 비밀번호">
                </label>
                <label>
                    <span>새 비밀번호:</span>
                    <input type="password" id="newPassword" placeholder="새 비밀번호">
                </label>
                <label>
                    <span>새 비밀번호 확인:</span>
                    <input type="password" id="newPasswordConfirm" placeholder="새 비밀번호 확인">
                </label>
                <button id="changePasswordBtn" class="btn-primary">비밀번호 변경</button>
                <p id="passwordChangeMsg" class="message"></p>
            </div>

            <div class="profile-delete">
                <h3>회원 탈퇴</h3>
                <p class="warning-text">⚠️ 회원 탈퇴 시 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다.</p>
                <label>
                    <span>비밀번호 확인:</span>
                    <input type="password" id="deleteAccountPassword" placeholder="비밀번호를 입력하세요">
                </label>
                <button id="deleteAccountBtn" class="btn-danger">회원 탈퇴</button>
                <p id="deleteAccountMsg" class="message"></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>